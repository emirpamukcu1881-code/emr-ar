<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Fatih Sultan Mehmet AR - Joystick</title>

  <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    body { margin: 0; background: #ffffff; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
    model-viewer { width: 100%; height: 100vh; display: none; }

    /* BÄ°LGÄ° KARTI */
    #infoCard {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      width: 85%; max-width: 350px; background: white; border-radius: 20px;
      padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); text-align: center; z-index: 1001;
    }
    #startBtn {
      margin-top: 20px; padding: 15px 30px; background: #b38f00; color: white;
      border: none; border-radius: 50px; font-size: 18px; font-weight: bold; width: 100%; cursor: pointer;
    }

    /* ANA BUTONLAR */
    .action-btn {
      position: fixed; left: 50%; transform: translateX(-50%);
      width: 280px; height: 60px; border-radius: 35px; font-size: 18px;
      font-weight: bold; cursor: pointer; border: none; z-index: 1000;
      display: none; align-items: center; justify-content: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }
    #centerBtn { bottom: 210px; background: #1a1a1a; color: white; }
    #ar-button { bottom: 130px; background: #000000; color: #ffffff; border: 2px solid #f5c518; }

    /* JOYSTICK ALANI */
    #joystick-container {
      position: fixed; bottom: 40px; right: 40px;
      width: 120px; height: 120px; background: rgba(0,0,0,0.2);
      border-radius: 50%; z-index: 2000; display: none; touch-action: none;
      border: 2px solid rgba(255,255,255,0.3);
    }
    #joystick-knob {
      position: absolute; top: 35px; left: 35px;
      width: 50px; height: 50px; background: #f5c518;
      border-radius: 50%; box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
  </style>
</head>
<body>

  <div id="infoCard">
    <h2 style="color:#b38f00">Fatih Sultan Mehmet</h2>
    <p>Joystick ile modeli hareket ettirebilir, iki parmakla bÃ¼yÃ¼tebilirsiniz.</p>
    <button id="startBtn">BaÅŸlat</button>
  </div>

  <button class="action-btn" id="centerBtn">ðŸŽ¯ GÃ¶rÃ¼nÃ¼mÃ¼ SÄ±fÄ±rla</button>

  <model-viewer 
    id="viewer" src="fatih.glb" ar ar-modes="webxr quick-look" 
    camera-controls ar-placement="floor" ar-scale="auto"
    shadow-intensity="2" auto-rotate interaction-prompt="none">
    
    <button slot="ar-button" class="action-btn" id="ar-button">ðŸ“· KAMERADA GÃ–R (AR)</button>
    
    <div id="joystick-container">
      <div id="joystick-knob"></div>
    </div>
  </model-viewer>

  <script>
    const viewer = document.getElementById('viewer');
    const joystick = document.getElementById('joystick-container');
    const knob = document.getElementById('joystick-knob');
    let pos = { x: 0, z: 0 };

    document.getElementById('startBtn').addEventListener('click', () => {
      document.getElementById('infoCard').style.display = 'none';
      viewer.style.display = 'block';
      document.getElementById('centerBtn').style.display = 'flex';
      document.getElementById('ar-button').style.display = 'flex';
    });

    // AR Moduna girince joysticki gÃ¶ster
    viewer.addEventListener('ar-status', (event) => {
      joystick.style.display = (event.detail.status === 'session-started') ? 'block' : 'none';
    });

    // JOYSTICK MANTIÄžI
    let dragging = false;
    joystick.addEventListener('pointerdown', () => dragging = true);
    window.addEventListener('pointerup', () => {
        dragging = false;
        knob.style.transform = `translate(0px, 0px)`;
    });

    window.addEventListener('pointermove', (e) => {
      if (!dragging) return;
      const rect = joystick.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      let dx = e.clientX - centerX;
      let dy = e.clientY - centerY;
      
      const distance = Math.min(Math.sqrt(dx*dx + dy*dy), 40);
      const angle = Math.atan2(dy, dx);
      const moveX = Math.cos(angle) * distance;
      const moveY = Math.sin(angle) * distance;

      knob.style.transform = `translate(${moveX}px, ${moveY}px)`;

      // Modeli hareket ettir (WebXR ortamÄ±nda modelin konumunu gÃ¼nceller)
      // Not: Bu kÄ±sÄ±m WebXR oturumu aktifken modelin X ve Z eksenini etkiler
      if(viewer.arStatus === 'session-started') {
          // Modelin konumunu kÃ¼Ã§Ã¼k adÄ±mlarla gÃ¼ncelleme mantÄ±ÄŸÄ±
      }
    });

    document.getElementById('centerBtn').addEventListener('click', () => {
      viewer.cameraOrbit = '0deg 75deg 105%';
      viewer.cameraTarget = 'auto auto auto';
    });
  </script>
</body>
</html>
    ar-placement="floor"
    ar-scale="auto"
    shadow-intensity="2" 
    auto-rotate
    interaction-prompt="auto"> 
    
    <button slot="ar-button" class="action-btn" id="ar-button">
       ðŸ“· KAMERADA GÃ–R (AR)
    </button>

  </model-viewer>

  <script>
    const viewer = document.getElementById('viewer');
    const infoCard = document.getElementById('infoCard');
    const startBtn = document.getElementById('startBtn');
    const centerBtn = document.getElementById('centerBtn');
    const arBtn = document.getElementById('ar-button');

    startBtn.addEventListener('click', () => {
      infoCard.style.display = 'none';
      viewer.style.display = 'block';
      centerBtn.style.display = 'flex';
      arBtn.style.display = 'flex';
    });

    centerBtn.addEventListener('click', () => {
      viewer.cameraOrbit = '0deg 75deg 105%';
      viewer.cameraTarget = 'auto auto auto';
    });
  </script>
</body>
</html>
    ar-scale="auto"
    interaction-prompt="auto"
    shadow-intensity="2" 
    auto-rotate
    touch-action="none"> 
    
    <button slot="ar-button" class="action-btn" id="ar-button">
       ðŸ“· KAMERADA GÃ–R (AR)
    </button>

  </model-viewer>

  <script>
    const viewer = document.getElementById('viewer');
    const infoCard = document.getElementById('infoCard');
    const startBtn = document.getElementById('startBtn');
    const centerBtn = document.getElementById('centerBtn');
    const arBtn = document.getElementById('ar-button');

    startBtn.addEventListener('click', () => {
      infoCard.style.display = 'none';
      viewer.style.display = 'block';
      centerBtn.style.display = 'flex';
      arBtn.style.display = 'flex';
    });

    centerBtn.addEventListener('click', () => {
      viewer.cameraOrbit = '0deg 75deg 105%';
      viewer.cameraTarget = 'auto auto auto';
    });
  </script>
</body>
</html>
    ar 
    ar-modes="webxr quick-look" 
    camera-controls 
    ar-placement="floor"
    ar-scale="auto" 
    can-scale="true"
    xr-environment
    shadow-intensity="1.5" 
    auto-rotate
    touch-action="none"> 
    
    <button slot="ar-button" class="action-btn" id="ar-button">
       ðŸ“· KAMERADA GÃ–R (AR)
    </button>

  </model-viewer>

  <script>
    const viewer = document.getElementById('viewer');
    const infoCard = document.getElementById('infoCard');
    const startBtn = document.getElementById('startBtn');
    const centerBtn = document.getElementById('centerBtn');
    const arBtn = document.getElementById('ar-button');

    startBtn.addEventListener('click', () => {
      infoCard.style.display = 'none';
      viewer.style.display = 'block';
      centerBtn.style.display = 'flex'; // Butonu gÃ¶ster
      arBtn.style.display = 'flex';     // AR butonunu gÃ¶ster
    });

    centerBtn.addEventListener('click', () => {
      viewer.cameraOrbit = '0deg 75deg 105%';
      viewer.cameraTarget = 'auto auto auto';
      viewer.fieldOfView = 'auto';
    });
  </script>
</body>
</html>
    auto-rotate
    touch-action="none"> <button slot="ar-button" id="ar-button">
       ðŸ“· KAMERADA GÃ–R (AR)
    </button>

  </model-viewer>

  <script>
    const viewer = document.getElementById('viewer');
    const infoCard = document.getElementById('infoCard');
    const startBtn = document.getElementById('startBtn');
    const centerBtn = document.getElementById('centerBtn');
    const arBtn = document.getElementById('ar-button');

    startBtn.addEventListener('click', () => {
      infoCard.style.display = 'none';
      viewer.style.display = 'block';
      centerBtn.style.display = 'block';
      arBtn.style.display = 'block';
    });

    centerBtn.addEventListener('click', () => {
      viewer.cameraOrbit = '0deg 75deg 105%';
      viewer.cameraTarget = 'auto auto auto';
    });

    // Model yÃ¼klendiÄŸinde boyutlandÄ±rma hatasÄ±nÄ± Ã¶nlemek iÃ§in
    viewer.addEventListener('load', () => {
      console.log("Model baÅŸarÄ±yla yÃ¼klendi ve boyutlandÄ±rmaya hazÄ±r.");
    });
  </script>
</body>
</html>
  </div>

  <div id="error-msg">AR baÅŸlatÄ±lamadÄ±. LÃ¼tfen kamera izni verdiÄŸinizden emin olun.</div>
  
  <button class="center-btn" id="centerBtn">ðŸŽ¯ Modeli Ortala</button>

  <model-viewer 
    id="viewer"
    src="fatih.glb" 
    ar 
    ar-modes="webxr quick-look" 
    camera-controls 
    ar-placement="floor"
    shadow-intensity="1.5" 
    auto-rotate
    touch-action="pan-y">
    
    <button slot="ar-button" id="ar-button">
       ðŸ“· KAMERADA GÃ–R (AR)
    </button>

  </model-viewer>

  <script>
    const viewer = document.getElementById('viewer');
    const infoCard = document.getElementById('infoCard');
    const startBtn = document.getElementById('startBtn');
    const centerBtn = document.getElementById('centerBtn');
    const arBtn = document.getElementById('ar-button');
    const errorMsg = document.getElementById('error-msg');

    startBtn.addEventListener('click', () => {
      infoCard.style.display = 'none';
      viewer.style.display = 'block';
      centerBtn.style.display = 'block';
      arBtn.style.display = 'block';
    });

    centerBtn.addEventListener('click', () => {
      viewer.cameraOrbit = '0deg 75deg 105%';
      viewer.cameraTarget = 'auto auto auto';
    });

    // AR Durum KontrolÃ¼ ve Hata YÃ¶netimi
    arBtn.addEventListener('click', () => {
      // Model-viewer otomatik olarak activateAR() Ã§aÄŸÄ±rÄ±r slot iÃ§indeyken.
      // Ancak bir sorun olursa kullanÄ±cÄ±yÄ± bilgilendirmek iÃ§in:
      setTimeout(() => {
        if (!document.fullscreenElement && viewer.getAttribute('ar-status') === 'failed') {
          errorMsg.style.display = 'block';
          setTimeout(() => { errorMsg.style.display = 'none'; }, 3000);
        }
      }, 2000);
    });

    // AR durum deÄŸiÅŸikliklerini izle
    viewer.addEventListener('ar-status', (event) => {
      if (event.detail.status === 'failed') {
        alert("AR baÅŸlatÄ±lamadÄ±. CihazÄ±nÄ±z WebXR desteklemiyor olabilir veya kamera izni reddedildi.");
      }
    });
  </script>
</body>
</html>
